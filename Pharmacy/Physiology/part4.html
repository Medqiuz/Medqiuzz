<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Endocrine System Quiz - Thyroid & Adrenal Glands</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* style.css - Universal quiz styling */
:root {
    --primary: #2c3e50;
    --secondary: #3498db;
    --success: #27ae60;
    --danger: #c0392b;
    --warning: #f39c12;
    --light: #ecf0f1;
    --dark: #2c3e50;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e9f2 100%);
    color: var(--dark);
    line-height: 1.6;
    min-height: 100vh;
    padding: 20px;
}

.container {
    max-width: 1000px;
    margin: 0 auto;
    background-color: white;
    border-radius: 15px;
    box-shadow: var(--shadow);
    overflow: hidden;
}

header {
    background: linear-gradient(to right, var(--primary), var(--secondary));
    color: white;
    padding: 25px;
    text-align: center;
}

header h1 {
    font-size: 2.2rem;
    margin-bottom: 10px;
}

header p {
    font-size: 1.1rem;
    opacity: 0.9;
}

.quiz-info {
    display: flex;
    justify-content: space-between;
    padding: 15px 25px;
    background-color: var(--light);
    border-bottom: 1px solid #ddd;
}

.timer {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--danger);
}

.progress {
    display: flex;
    align-items: center;
    gap: 10px;
}

.progress-bar {
    width: 200px;
    height: 10px;
    background-color: #ddd;
    border-radius: 5px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background-color: var(--secondary);
    width: 0%;
    transition: var(--transition);
}

.quiz-container {
    padding: 30px;
}

.question-container {
    margin-bottom: 30px;
}

.question-number {
    font-size: 1.1rem;
    color: var(--secondary);
    margin-bottom: 5px;
}

.question-text {
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 20px;
    line-height: 1.4;
}

.options-container {
    display: grid;
    gap: 12px;
    margin-bottom: 25px;
}

.option {
    padding: 15px;
    background-color: var(--light);
    border-radius: 8px;
    cursor: pointer;
    transition: var(--transition);
    border: 2px solid transparent;
}

.option:hover {
    background-color: #e0e7ee;
    transform: translateY(-2px);
}

.option.selected {
    border-color: var(--secondary);
    background-color: rgba(52, 152, 219, 0.1);
}

.option.correct {
    border-color: var(--success);
    background-color: rgba(39, 174, 96, 0.1);
}

.option.incorrect {
    border-color: var(--danger);
    background-color: rgba(192, 57, 43, 0.1);
}

.explanation-container {
    padding: 20px;
    background-color: rgba(52, 152, 219, 0.05);
    border-radius: 8px;
    margin-bottom: 20px;
    display: none;
}

.explanation-title {
    font-weight: 600;
    color: var(--secondary);
    margin-bottom: 10px;
}

.memory-tip {
    background-color: rgba(243, 156, 18, 0.1);
    padding: 15px;
    border-left: 4px solid var(--warning);
    margin-top: 15px;
    border-radius: 0 8px 8px 0;
}

.memory-tip-title {
    font-weight: 600;
    color: var(--warning);
    margin-bottom: 5px;
}

.navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
}

button {
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
}

.btn-prev {
    background-color: var(--light);
    color: var(--dark);
}

.btn-next {
    background-color: var(--secondary);
    color: white;
}

.btn-submit {
    background-color: var(--success);
    color: white;
    display: none;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.results-container {
    padding: 30px;
    text-align: center;
    display: none;
}

.results-title {
    font-size: 2rem;
    margin-bottom: 20px;
    color: var(--primary);
}

.score {
    font-size: 4rem;
    font-weight: bold;
    color: var(--secondary);
    margin: 20px 0;
}

.score-text {
    font-size: 1.3rem;
    margin-bottom: 30px;
}

.summary {
    text-align: left;
    background-color: var(--light);
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
}

.summary-title {
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--primary);
}

.restart-btn {
    background-color: var(--secondary);
    color: white;
    margin-top: 20px;
    padding: 15px 30px;
    font-size: 1.1rem;
}

.question-review {
    margin-top: 30px;
    text-align: left;
}

.review-item {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px solid #ddd;
}

.review-question {
    font-weight: 600;
    margin-bottom: 10px;
}

.review-answer {
    margin-bottom: 5px;
}

.correct-answer {
    color: var(--success);
    font-weight: 600;
}

.user-answer {
    color: var(--danger);
    font-weight: 600;
}

@media (max-width: 768px) {
    .quiz-info {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }

    .progress-bar {
        width: 100%;
    }

    .question-text {
        font-size: 1.2rem;
    }

    .navigation {
        flex-direction: column;
        gap: 10px;
    }

    button {
        width: 100%;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Endocrine System Quiz - Part 2</h1>
            <p>Thyroid & Adrenal Glands | Based on Endocrine Physiology Materials</p>
        </header>

        <div class="quiz-info">
            <div class="timer">Time: <span id="time">60:00</span></div>
            <div class="progress">
                <span>Progress:</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <span id="progress-text">0/35</span>
            </div>
        </div>

        <div class="quiz-container" id="quiz-container">
            <div class="question-container">
                <div class="question-number" id="question-number">Question 1 of 35</div>
                <div class="question-text" id="question-text"></div>
                <div class="options-container" id="options-container"></div>
            </div>

            <div class="explanation-container" id="explanation-container">
                <div class="explanation-title">Explanation</div>
                <div id="explanation-text"></div>
                <div class="memory-tip" id="memory-tip">
                    <div class="memory-tip-title">Memory Tip</div>
                    <div id="memory-tip-text"></div>
                </div>
            </div>

            <div class="navigation">
                <button class="btn-prev" id="prev-btn" disabled>Previous</button>
                <button class="btn-next" id="next-btn">Next Question</button>
                <button class="btn-submit" id="submit-btn">Submit Quiz</button>
            </div>
        </div>

        <div class="results-container" id="results-container">
            <h2 class="results-title">Quiz Results</h2>
            <div class="score" id="score">0/35</div>
            <div class="score-text" id="score-text"></div>

            <div class="summary">
                <div class="summary-title">Performance Summary</div>
                <p>Total Questions: <span id="total-questions">35</span></p>
                <p>Correct Answers: <span id="correct-answers">0</span></p>
                <p>Incorrect Answers: <span id="incorrect-answers">0</span></p>
                <p>Percentage: <span id="percentage">0%</span></p>
                <p>Time Taken: <span id="time-taken">60:00</span></p>
            </div>

            <div class="question-review" id="question-review">
                <h3>Question Review</h3>
                <!-- Review content will be generated by JavaScript -->
            </div>

            <button class="restart-btn" id="restart-btn">Restart Quiz</button>
        </div>
    </div>

    <script>
        // Endocrine System Quiz - Thyroid & Adrenal Glands (35 questions)
        const questions = [
            {
                question: "Which enzyme is responsible for converting T4 to the active T3 hormone?",
                options: [
                    "Thyroperoxidase",
                    "5'-deiodinase",
                    "Thyroglobulin synthase",
                    "Na+/I- symporter"
                ],
                correct: 1,
                explanation: "5'-deiodinase converts T4 (thyroxine) to active T3 (triiodothyronine) in peripheral tissues. T4 serves as a pro-hormone reservoir.",
                memoryTip: "T4 → 5'-deiodinase → T3 (active form); rT3 = reverse T3 (inactive)"
            },
            {
                question: "What is the primary regulator of aldosterone secretion?",
                options: [
                    "ACTH",
                    "Renin-angiotensin-aldosterone system (RAAS)",
                    "Potassium levels",
                    "Both RAAS and potassium"
                ],
                correct: 3,
                explanation: "Aldosterone secretion is primarily regulated by RAAS (angiotensin II) and plasma potassium levels. ACTH has minor stimulatory effect.",
                memoryTip: "Aldosterone regulation: RAAS (main) + K+ (direct) + ACTH (minor)"
            },
            {
                question: "Graves' disease is characterized by:",
                options: [
                    "Autoimmune destruction of thyroid",
                    "TSH receptor-stimulating antibodies",
                    "Iodine deficiency",
                    "Thyroid carcinoma"
                ],
                correct: 1,
                explanation: "Graves' disease is autoimmune hyperthyroidism caused by TSH receptor-stimulating antibodies (TSI), leading to unregulated thyroid hormone production.",
                memoryTip: "Graves = TSH receptor antibodies (stimulatory) → hyperthyroidism + ophthalmopathy"
            },
            {
                question: "Which zone of the adrenal cortex produces cortisol?",
                options: [
                    "Zona glomerulosa",
                    "Zona fasciculata",
                    "Zona reticularis",
                    "Adrenal medulla"
                ],
                correct: 1,
                explanation: "Zona fasciculata produces glucocorticoids (cortisol), zona glomerulosa produces mineralocorticoids (aldosterone), zona reticularis produces androgens.",
                memoryTip: "Adrenal cortex: Glomerulosa (salt=aldosterone), Fasciculata (sugar=cortisol), Reticularis (sex=androgens)"
            },
            {
                question: "Hashimoto's thyroiditis involves:",
                options: [
                    "Stimulatory TSH receptor antibodies",
                    "Anti-TPO and anti-thyroglobulin antibodies",
                    "Ectopic thyroid tissue",
                    "TSH-secreting pituitary adenoma"
                ],
                correct: 1,
                explanation: "Hashimoto's thyroiditis is autoimmune hypothyroidism with antibodies against thyroid peroxidase (TPO) and thyroglobulin, causing lymphocytic infiltration and follicular destruction.",
                memoryTip: "Hashimoto = anti-TPO/anti-Tg antibodies → lymphocytic infiltration → hypothyroidism"
            },
            {
                question: "Cushing's syndrome results from:",
                options: [
                    "Cortisol deficiency",
                    "Chronic excess cortisol exposure",
                    "Aldosterone deficiency",
                    "Thyroid hormone excess"
                ],
                correct: 1,
                explanation: "Cushing's syndrome is caused by chronic exposure to high cortisol levels (endogenous or exogenous), leading to central obesity, moon facies, purple striae, etc.",
                memoryTip: "Cushing = too much cortisol; Addison = too little cortisol"
            },
            {
                question: "What is the rate-limiting step in thyroid hormone synthesis?",
                options: [
                    "Iodide trapping by Na+/I- symporter",
                    "Thyroglobulin synthesis",
                    "Iodide oxidation by thyroperoxidase",
                    "Coupling of MIT and DIT"
                ],
                correct: 0,
                explanation: "Iodide trapping by the Na+/I- symporter (NIS) is the rate-limiting step, concentrating iodide 20-40 fold against gradient.",
                memoryTip: "NIS (Na+/I- symporter) = rate-limiting step in thyroid hormone synthesis"
            },
            {
                question: "Primary hyperaldosteronism (Conn syndrome) features:",
                options: [
                    "Hypertension, hypokalemia, metabolic alkalosis",
                    "Hypotension, hyperkalemia, metabolic acidosis",
                    "Hypertension, hypernatremia, metabolic acidosis",
                    "Hypotension, hypokalemia, metabolic alkalosis"
                ],
                correct: 0,
                explanation: "Conn syndrome presents with hypertension (salt/water retention), hypokalemia (K+ wasting), metabolic alkalosis (H+ excretion), and suppressed renin.",
                memoryTip: "Conn syndrome = hypertension + hypokalemia + metabolic alkalosis + low renin"
            },
            {
                question: "Which thyroid hormone has the longest half-life?",
                options: [
                    "T3 (triiodothyronine)",
                    "T4 (thyroxine)",
                    "rT3 (reverse T3)",
                    "Calcitonin"
                ],
                correct: 1,
                explanation: "T4 has a 7-day half-life due to strong binding to TBG, serving as reservoir. T3 has 1-day half-life, rT3 has intermediate half-life.",
                memoryTip: "T4 half-life = 7 days (reservoir); T3 half-life = 1 day (active); rT3 = inactive"
            },
            {
                question: "Addison's disease (primary adrenal insufficiency) presents with:",
                options: [
                    "Hypertension and hypokalemia",
                    "Hypertension and hyperglycemia",
                    "Hypotension and hyperpigmentation",
                    "Hypotension and hypopigmentation"
                ],
                correct: 2,
                explanation: "Addison's disease features hypotension (mineralocorticoid deficiency), hyperpigmentation (ACTH excess), hyponatremia, hyperkalemia, and hypoglycemia.",
                memoryTip: "Addison = hypotension + hyperpigmentation + hyponatremia + hyperkalemia"
            },
            {
                question: "The Na+/I- symporter (NIS) is inhibited by:",
                options: [
                    "Thyroid stimulating hormone (TSH)",
                    "Perchlorate and thiocyanate",
                    "Propylthiouracil (PTU)",
                    "Methimazole"
                ],
                correct: 1,
                explanation: "Perchlorate and thiocyanate competitively inhibit the Na+/I- symporter, blocking iodide uptake into thyroid follicular cells.",
                memoryTip: "NIS inhibitors: perchlorate, thiocyanate; Organification inhibitors: PTU, methimazole"
            },
            {
                question: "What is the most common cause of Cushing's syndrome?",
                options: [
                    "Pituitary adenoma (Cushing's disease)",
                    "Adrenal adenoma",
                    "Ectopic ACTH secretion",
                    "Iatrogenic glucocorticoid administration"
                ],
                correct: 3,
                explanation: "Exogenous glucocorticoid administration is the most common cause of Cushing's syndrome. Among endogenous causes, pituitary adenomas (Cushing's disease) are most common.",
                memoryTip: "Most common Cushing: iatrogenic (exogenous steroids); Endogenous most common: pituitary adenoma"
            },
            {
                question: "Thyroglobulin serves as:",
                options: [
                    "Transport protein for thyroid hormones",
                    "Receptor for TSH",
                    "Storage form of thyroid hormones",
                    "Enzyme for T4 to T3 conversion"
                ],
                correct: 2,
                explanation: "Thyroglobulin is a large glycoprotein that serves as storage for thyroid hormones within thyroid follicles (colloid). Hormones are stored as part of thyroglobulin.",
                memoryTip: "Thyroglobulin = storage protein in colloid; TBG = transport protein in blood"
            },
            {
                question: "Pheochromocytoma follows the 'rule of 10s' which includes:",
                options: [
                    "10% malignant, 10% bilateral, 10% extra-adrenal",
                    "50% malignant, 25% bilateral, 25% extra-adrenal",
                    "5% malignant, 5% bilateral, 5% extra-adrenal",
                    "20% malignant, 20% bilateral, 20% extra-adrenal"
                ],
                correct: 0,
                explanation: "Pheochromocytoma: 10% malignant, 10% bilateral, 10% extra-adrenal, 10% familial, 10% occur in children.",
                memoryTip: "Pheochromocytoma rule of 10s: 10% malignant, bilateral, extra-adrenal, familial, pediatric"
            },
            {
                question: "Which enzyme deficiency causes congenital adrenal hyperplasia with virilization and salt-wasting?",
                options: [
                    "11β-hydroxylase deficiency",
                    "17α-hydroxylase deficiency",
                    "21-hydroxylase deficiency",
                    "3β-hydroxysteroid dehydrogenase deficiency"
                ],
                correct: 2,
                explanation: "21-hydroxylase deficiency (most common CAH) causes cortisol and aldosterone deficiency with androgen excess, leading to virilization and salt-wasting crisis.",
                memoryTip: "21-hydroxylase deficiency = most common CAH → virilization + salt-wasting"
            },
            {
                question: "TSH secretion is inhibited by:",
                options: [
                    "Low T3/T4 levels",
                    "High T3/T4 levels",
                    "TRH from hypothalamus",
                    "Cold exposure"
                ],
                correct: 1,
                explanation: "TSH secretion is negatively regulated by thyroid hormones (T3/T4). High levels inhibit TRH and TSH, while low levels stimulate them.",
                memoryTip: "Thyroid hormones (T3/T4) negatively feedback on TRH and TSH secretion"
            },
            {
                question: "Waterhouse-Friderichsen syndrome involves:",
                options: [
                    "Chronic adrenal insufficiency",
                    "Acute adrenal hemorrhage with meningococcal sepsis",
                    "Adrenal adenoma rupture",
                    "Pituitary apoplexy"
                ],
                correct: 1,
                explanation: "Waterhouse-Friderichsen syndrome is acute adrenal hemorrhage associated with Neisseria meningitidis septicemia, causing acute adrenal insufficiency and DIC.",
                memoryTip: "Waterhouse-Friderichsen = meningococcal sepsis → adrenal hemorrhage → acute adrenal crisis"
            },
            {
                question: "Which thyroid cancer has the best prognosis?",
                options: [
                    "Papillary carcinoma",
                    "Follicular carcinoma",
                    "Medullary carcinoma",
                    "Anaplastic carcinoma"
                ],
                correct: 0,
                explanation: "Papillary thyroid carcinoma has excellent prognosis (95% 10-year survival), often presents with psammoma bodies and 'Orphan Annie' nuclei.",
                memoryTip: "Papillary = best prognosis; Anaplastic = worst prognosis; Medullary = calcitonin secretion"
            },
            {
                question: "Cortisol's anti-inflammatory effects include inhibition of:",
                options: [
                    "Phospholipase A2 and IL-2 production",
                    "Na+/K+ ATPase",
                    "Thyroid peroxidase",
                    "Renin secretion"
                ],
                correct: 0,
                explanation: "Cortisol inhibits phospholipase A2 (reducing prostaglandin/leukotriene synthesis) and IL-2 production (T-cell activation), mediating anti-inflammatory effects.",
                memoryTip: "Cortisol anti-inflammatory: inhibits phospholipase A2 → ↓ prostaglandins; inhibits IL-2 → ↓ T-cell activation"
            },
            {
                question: "Thyroid storm (thyrotoxic crisis) is characterized by:",
                options: [
                    "Mild hyperthyroid symptoms",
                    "Life-threatening hypermetabolic state",
                    "Hypothyroid coma",
                    "Normal thyroid function"
                ],
                correct: 1,
                explanation: "Thyroid storm is life-threatening exacerbation of hyperthyroidism with fever, tachycardia, agitation, delirium, and can lead to heart failure.",
                memoryTip: "Thyroid storm = hyperthyroidism crisis → fever, tachycardia, agitation, delirium → medical emergency"
            },
            {
                question: "Secondary hyperaldosteronism occurs in:",
                options: [
                    "Adrenal adenoma",
                    "Renal artery stenosis",
                    "Primary adrenal hyperplasia",
                    "Adrenal carcinoma"
                ],
                correct: 1,
                explanation: "Secondary hyperaldosteronism is appropriate aldosterone increase due to RAAS activation (e.g., renal artery stenosis, heart failure, cirrhosis).",
                memoryTip: "Primary hyperaldosteronism = adrenal problem (low renin); Secondary = appropriate response (high renin)"
            },
            {
                question: "Myxedema refers to:",
                options: [
                    "Hyperthyroid eye changes",
                    "Severe, long-standing hypothyroidism",
                    "Thyroid adenoma",
                    "Thyroiditis pain"
                ],
                correct: 1,
                explanation: "Myxedema is severe hypothyroidism with non-pitting edema, cool/dry skin, lethargy, and can progress to myxedema coma (medical emergency).",
                memoryTip: "Myxedema = severe hypothyroidism; Myxedema coma = hypothyroid emergency"
            },
            {
                question: "The adrenal medulla secretes:",
                options: [
                    "Cortisol and aldosterone",
                    "Epinephrine and norepinephrine",
                    "Thyroid hormones",
                    "Insulin and glucagon"
                ],
                correct: 1,
                explanation: "Adrenal medulla (derived from neural crest) secretes catecholamines: epinephrine (80%), norepinephrine (20%), and some dopamine.",
                memoryTip: "Adrenal medulla = catecholamines (Epi/NE); Adrenal cortex = steroids (cortisol, aldosterone, androgens)"
            },
            {
                question: "Propylthiouracil (PTU) and methimazole act by:",
                options: [
                    "Inhibiting iodide trapping",
                    "Inhibiting thyroid hormone release",
                    "Inhibiting thyroid hormone synthesis (organization and coupling)",
                    "Destroying thyroid tissue"
                ],
                correct: 2,
                explanation: "PTU and methimazole inhibit thyroperoxidase, blocking organification (iodination) and coupling reactions. PTU also inhibits peripheral T4→T3 conversion.",
                memoryTip: "PTU/methimazole = inhibit thyroid hormone synthesis; Radioactive iodine = destroys thyroid tissue"
            },
            {
                question: "Which test distinguishes Cushing's disease from ectopic ACTH production?",
                options: [
                    "Water deprivation test",
                    "Dexamethasone suppression test",
                    "TRH stimulation test",
                    "Calcium infusion test"
                ],
                correct: 1,
                explanation: "High-dose dexamethasone suppression test: Cushing's disease (pituitary adenoma) suppresses ACTH/cortisol; ectopic ACTH does not suppress.",
                memoryTip: "Dexamethasone test: Pituitary Cushing's suppresses; Ectopic ACTH doesn't suppress"
            },
            {
                question: "Thyroid hormones increase basal metabolic rate by:",
                options: [
                    "Stimulating Na+/K+ ATPase activity",
                    "Inhibiting mitochondrial respiration",
                    "Decreasing protein synthesis",
                    "Stimulating insulin secretion"
                ],
                correct: 0,
                explanation: "Thyroid hormones stimulate Na+/K+ ATPase activity (ion pumping), increasing oxygen consumption, heat production, and basal metabolic rate.",
                memoryTip: "Thyroid hormones ↑ BMR by ↑ Na+/K+ ATPase → ↑ O2 consumption → ↑ heat production"
            },
            {
                question: "Addisonian crisis (acute adrenal insufficiency) requires:",
                options: [
                    "Slow steroid taper",
                    "Immediate hydrocortisone IV and fluid resuscitation",
                    "Radioactive iodine ablation",
                    "Thyroid hormone replacement"
                ],
                correct: 1,
                explanation: "Addisonian crisis is life-threatening and requires immediate IV hydrocortisone, IV fluids with dextrose, and electrolyte correction.",
                memoryTip: "Addisonian crisis = medical emergency → IV hydrocortisone + fluids immediately"
            },
            {
                question: "Medullary thyroid carcinoma originates from:",
                options: [
                    "Thyroid follicular cells",
                    "Parafollicular C-cells",
                    "Thyroid stromal cells",
                    "Parathyroid cells"
                ],
                correct: 1,
                explanation: "Medullary thyroid carcinoma arises from parafollicular C-cells (neural crest origin), secretes calcitonin, associated with MEN 2A/2B.",
                memoryTip: "Medullary thyroid cancer = C-cells → calcitonin secretion → associated with MEN 2"
            },
            {
                question: "Conn's syndrome vs secondary hyperaldosteronism: which has low plasma renin?",
                options: [
                    "Both have low renin",
                    "Both have high renin",
                    "Conn's has low renin, secondary has high renin",
                    "Conn's has high renin, secondary has low renin"
                ],
                correct: 2,
                explanation: "Primary hyperaldosteronism (Conn's) has low renin (autonomous aldosterone secretion); Secondary hyperaldosteronism has high renin (appropriate RAAS activation).",
                memoryTip: "Primary hyperaldosteronism = high aldosterone + low renin; Secondary = high aldosterone + high renin"
            },
            {
                question: "Thyroid hormone synthesis requires which essential element?",
                options: [
                    "Iron",
                    "Zinc",
                    "Iodine",
                    "Selenium"
                ],
                correct: 2,
                explanation: "Iodine is essential for thyroid hormone synthesis - incorporated into tyrosine residues of thyroglobulin to form MIT and DIT, which couple to form T3/T4.",
                memoryTip: "Iodine essential for thyroid hormones; Selenium needed for deiodinase enzymes"
            },
            {
                question: "Cortisol secretion pattern is:",
                options: [
                    "Constant throughout day",
                    "Pulsatile with circadian rhythm (AM peak)",
                    "Only during stress",
                    "Random without pattern"
                ],
                correct: 1,
                explanation: "Cortisol secretion is pulsatile with circadian rhythm: peaks early morning (6-8 AM), declines through day, lowest at midnight, plus stress-induced pulses.",
                memoryTip: "Cortisol = circadian (AM peak) + stress-induced pulses"
            },
            {
                question: "Which is NOT a feature of hyperthyroidism?",
                options: [
                    "Heat intolerance",
                    "Weight loss with increased appetite",
                    "Bradycardia",
                    "Tremor and anxiety"
                ],
                correct: 2,
                explanation: "Hyperthyroidism causes tachycardia (increased heart rate), not bradycardia. Other features: heat intolerance, weight loss, tremor, anxiety, diarrhea.",
                memoryTip: "Hyperthyroidism = ↑ HR (tachycardia); Hypothyroidism = ↓ HR (bradycardia)"
            },
            {
                question: "Addison's disease hyperpigmentation is due to:",
                options: [
                    "Melanocyte-stimulating hormone (MSH) from POMC",
                    "Direct cortisol effect on melanocytes",
                    "Thyroid hormone excess",
                    "Aldosterone deficiency"
                ],
                correct: 0,
                explanation: "Hyperpigmentation in Addison's results from increased POMC-derived peptides (ACTH and MSH) due to loss of cortisol negative feedback.",
                memoryTip: "Addison's hyperpigmentation = ↑ ACTH/MSH (from POMC) → stimulates melanocytes"
            },
            {
                question: "Thyroglossal duct cysts arise from:",
                options: [
                    "Persistent thyroglossal duct remnant",
                    "Thyroid adenoma degeneration",
                    "Branchial cleft abnormality",
                    "Parathyroid cyst"
                ],
                correct: 0,
                explanation: "Thyroglossal duct cysts are midline neck cysts from persistent embryonic thyroglossal duct (thyroid migration path from foramen cecum to neck).",
                memoryTip: "Thyroglossal duct cyst = midline neck mass, moves with tongue protrusion"
            },
            {
                question: "Pheochromocytoma diagnosis relies on:",
                options: [
                    "Serum cortisol levels",
                    "24-hour urinary metanephrines",
                    "Plasma aldosterone",
                    "TSH levels"
                ],
                correct: 1,
                explanation: "Pheochromocytoma diagnosis: 24-hour urinary fractionated metanephrines (most reliable) or plasma free metanephrines. Measure catecholamine metabolites.",
                memoryTip: "Pheochromocytoma diagnosis = urinary metanephrines (metabolites of catecholamines)"
            },
            {
                question: "Hashimoto's thyroiditis is associated with which HLA type?",
                options: [
                    "HLA-DR3",
                    "HLA-DR5",
                    "HLA-B27",
                    "HLA-DQ2"
                ],
                correct: 1,
                explanation: "Hashimoto's thyroiditis shows genetic association with HLA-DR5 (in Caucasians) and HLA-DR3. Graves' disease associated with HLA-DR3.",
                memoryTip: "Hashimoto: HLA-DR5; Graves: HLA-DR3; Type 1 DM: HLA-DR3/DR4"
            }
        ];

        // DOM elements
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results-container');
        const questionNumber = document.getElementById('question-number');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const explanationContainer = document.getElementById('explanation-container');
        const explanationText = document.getElementById('explanation-text');
        const memoryTipText = document.getElementById('memory-tip-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const progressFill = document.getElementById('progress-fill');
        const progressText = document.getElementById('progress-text');
        const timeDisplay = document.getElementById('time');
        const scoreDisplay = document.getElementById('score');
        const scoreText = document.getElementById('score-text');
        const totalQuestions = document.getElementById('total-questions');
        const correctAnswers = document.getElementById('correct-answers');
        const incorrectAnswers = document.getElementById('incorrect-answers');
        const percentage = document.getElementById('percentage');
        const timeTaken = document.getElementById('time-taken');
        const questionReview = document.getElementById('question-review');
        const restartBtn = document.getElementById('restart-btn');

        // Quiz state
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let shuffledOptions = new Array(questions.length).fill(null);
        let shuffledCorrectIndex = new Array(questions.length).fill(null);
        let score = 0;
        let timer;
        let timeLeft = 60 * 60; // 60 minutes in seconds
        let quizCompleted = false;

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // Get shuffled options for a question
        function getShuffledOptions(questionIndex) {
            if (!shuffledOptions[questionIndex]) {
                const question = questions[questionIndex];
                // Create array of indices [0, 1, 2, 3]
                const indices = [0, 1, 2, 3];
                // Shuffle the indices
                const shuffledIndices = shuffleArray(indices);
                
                // Store shuffled options
                shuffledOptions[questionIndex] = shuffledIndices.map(idx => question.options[idx]);
                
                // Find where the correct answer ended up after shuffling
                shuffledCorrectIndex[questionIndex] = shuffledIndices.indexOf(question.correct);
            }
            
            return {
                options: shuffledOptions[questionIndex],
                correctIndex: shuffledCorrectIndex[questionIndex]
            };
        }

        // Initialize quiz
        function initQuiz() {
            displayQuestion();
            startTimer();
            updateProgress();
        }

        // Display current question
        function displayQuestion() {
            const question = questions[currentQuestion];
            const shuffled = getShuffledOptions(currentQuestion);
            
            questionNumber.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            questionText.textContent = question.question;
            
            optionsContainer.innerHTML = '';
            shuffled.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.dataset.index = index; // Store the shuffled index
                
                if (userAnswers[currentQuestion] === index) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.textContent = option;
                optionElement.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            // Show/hide explanation
            if (userAnswers[currentQuestion] !== null) {
                showExplanation();
            } else {
                explanationContainer.style.display = 'none';
            }
            
            // Update button states
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = false;
            submitBtn.style.display = currentQuestion === questions.length - 1 ? 'block' : 'none';
        }

        // Select an option
        function selectOption(shuffledIndex) {
            if (quizCompleted) return;
            
            userAnswers[currentQuestion] = shuffledIndex;
            
            // Update UI
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.classList.remove('selected'));
            options[shuffledIndex].classList.add('selected');
            
            showExplanation();
        }

        // Show explanation for current question
        function showExplanation() {
            const question = questions[currentQuestion];
            const shuffled = getShuffledOptions(currentQuestion);
            
            explanationText.textContent = question.explanation;
            memoryTipText.textContent = question.memoryTip;
            explanationContainer.style.display = 'block';
            
            // Highlight correct/incorrect answers
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.classList.remove('correct', 'incorrect');
                if (index === shuffled.correctIndex) {
                    option.classList.add('correct');
                } else if (index === userAnswers[currentQuestion] && index !== shuffled.correctIndex) {
                    option.classList.add('incorrect');
                }
            });
        }

        // Navigate to next question
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
                updateProgress();
            }
        }

        // Navigate to previous question
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
                updateProgress();
            }
        }

        // Update progress bar
        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${currentQuestion + 1}/${questions.length}`;
        }

        // Start timer
        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timeDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    submitQuiz();
                }
            }, 1000);
        }

        // Submit quiz
        function submitQuiz() {
            clearInterval(timer);
            quizCompleted = true;
            
            // Calculate score
            score = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] !== null) {
                    const shuffled = getShuffledOptions(i);
                    if (userAnswers[i] === shuffled.correctIndex) {
                        score++;
                    }
                }
            }
            
            // Display results
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
            
            scoreDisplay.textContent = `${score}/${questions.length}`;
            totalQuestions.textContent = questions.length;
            correctAnswers.textContent = score;
            incorrectAnswers.textContent = questions.length - score;
            percentage.textContent = `${((score / questions.length) * 100).toFixed(1)}%`;
            
            const minutesTaken = Math.floor((60 * 60 - timeLeft) / 60);
            const secondsTaken = (60 * 60 - timeLeft) % 60;
            timeTaken.textContent = `${minutesTaken.toString().padStart(2, '0')}:${secondsTaken.toString().padStart(2, '0')}`;
            
            // Set score text
            if (score >= questions.length * 0.8) {
                scoreText.textContent = "Excellent! You have mastered Thyroid & Adrenal Gland physiology.";
            } else if (score >= questions.length * 0.6) {
                scoreText.textContent = "Good job! You have a solid understanding of thyroid and adrenal function.";
            } else if (score >= questions.length * 0.5) {
                scoreText.textContent = "You passed! Review the explanations to strengthen your knowledge.";
            } else {
                scoreText.textContent = "Review the materials on thyroid and adrenal gland physiology.";
            }
            
            // Generate question review
            generateQuestionReview();
        }

        // Generate question review
        function generateQuestionReview() {
            questionReview.innerHTML = '<h3>Question Review</h3>';
            
            questions.forEach((question, index) => {
                const shuffled = getShuffledOptions(index);
                const reviewItem = document.createElement('div');
                reviewItem.className = 'review-item';
                
                const reviewQuestion = document.createElement('div');
                reviewQuestion.className = 'review-question';
                reviewQuestion.textContent = `${index + 1}. ${question.question}`;
                
                const userAnswer = document.createElement('div');
                userAnswer.className = 'review-answer';
                if (userAnswers[index] !== null) {
                    userAnswer.innerHTML = `Your answer: <span class="user-answer">${shuffled.options[userAnswers[index]]}</span>`;
                } else {
                    userAnswer.innerHTML = `Your answer: <span class="user-answer">Not answered</span>`;
                }
                
                const correctAnswer = document.createElement('div');
                correctAnswer.className = 'review-answer';
                correctAnswer.innerHTML = `Correct answer: <span class="correct-answer">${shuffled.options[shuffled.correctIndex]}</span>`;
                
                reviewItem.appendChild(reviewQuestion);
                reviewItem.appendChild(userAnswer);
                reviewItem.appendChild(correctAnswer);
                
                questionReview.appendChild(reviewItem);
            });
        }

        // Restart quiz
        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            shuffledOptions = new Array(questions.length).fill(null);
            shuffledCorrectIndex = new Array(questions.length).fill(null);
            score = 0;
            timeLeft = 60 * 60;
            quizCompleted = false;
            
            quizContainer.style.display = 'block';
            resultsContainer.style.display = 'none';
            
            initQuiz();
        }

        // Event listeners
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        submitBtn.addEventListener('click', submitQuiz);
        restartBtn.addEventListener('click', restartQuiz);

        // Start the quiz
        initQuiz();
    </script>
</body>
</html>
