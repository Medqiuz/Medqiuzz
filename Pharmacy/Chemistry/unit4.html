<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 4: Amino Acids & Proteins | Chemistry of Natural Products</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --card-bg: #ffffff;
            --border: #e0e0e0;
            --text: #333333;
            --text-light: #6c757d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 25px 30px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-content h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .header-content p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
            box-shadow: 0 4px 10px rgba(247, 37, 133, 0.3);
        }

        .btn-primary:hover {
            background: #e11574;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(247, 37, 133, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Breadcrumb */
        .breadcrumb {
            background: var(--card-bg);
            padding: 15px 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            font-size: 0.95rem;
        }

        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .breadcrumb a:hover {
            color: var(--secondary);
        }

        .separator {
            margin: 0 10px;
            color: var(--text-light);
        }

        /* Overview Card */
        .overview-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid var(--primary);
        }

        .overview-card h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .overview-card p {
            color: var(--text);
            margin-bottom: 20px;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .stat {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 15px;
            border-radius: var(--radius);
            flex: 1;
            text-align: center;
            border: 1px solid var(--border);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Quiz Container */
        .quiz-container {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 30px;
        }

        .quiz-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quiz-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .quiz-controls {
            display: flex;
            gap: 15px;
        }

        .quiz-content {
            padding: 30px;
        }

        /* Question Styles */
        .question-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .question-container {
            background: #f8f9fa;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--info);
            transition: all 0.3s ease;
        }

        .question-container:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            transform: translateY(-2px);
        }

        .question-number {
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .question-text {
            margin-bottom: 15px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .options-container {
            margin-left: 10px;
        }

        .option {
            margin-bottom: 12px;
            display: flex;
            align-items: flex-start;
        }

        .option input {
            margin-right: 12px;
            margin-top: 5px;
            accent-color: var(--primary);
        }

        .option label {
            cursor: pointer;
            line-height: 1.5;
        }

        .short-answer {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }

        .short-answer:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .correct {
            background: rgba(76, 201, 240, 0.1);
            border: 1px solid var(--success);
            color: #0a7c8c;
        }

        .incorrect {
            background: rgba(247, 37, 133, 0.1);
            border: 1px solid var(--danger);
            color: #a4133c;
        }

        /* Results Section */
        .results {
            margin-top: 40px;
            padding: 30px;
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: none;
        }

        .score-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .score {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .score-text {
            font-size: 1.2rem;
            color: var(--text-light);
        }

        .results-details {
            max-width: 800px;
            margin: 0 auto;
        }

        .results-section {
            margin-bottom: 30px;
        }

        .results-section h3 {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }

        .question-result {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .question-result.correct {
            background: rgba(76, 201, 240, 0.1);
            border-left: 4px solid var(--success);
        }

        .question-result.incorrect {
            background: rgba(247, 37, 133, 0.1);
            border-left: 4px solid var(--danger);
        }

        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .stats {
                flex-direction: column;
            }
            
            .quiz-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .quiz-controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-atom"></i> Unit 4: Amino Acids & Proteins</h1>
                <p>Chemistry of Natural Products | Pharmacy Year 2</p>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="goBack()">
                    <i class="fas fa-arrow-left"></i> Back to Course
                </button>
                <button class="btn btn-primary" id="start-quiz">
                    <i class="fas fa-play"></i> Start Quiz
                </button>
            </div>
        </header>

        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="../../dashboard.html">Dashboard</a>
            <span class="separator">/</span>
            <a href="../pharmacy.html">Pharmacy</a>
            <span class="separator">/</span>
            <a href="../year2.html">Year 2</a>
            <span class="separator">/</span>
            <a href="../session1.html">Session 1</a>
            <span class="separator">/</span>
            <a href="natural-products.html">Chemistry of Natural Products</a>
            <span class="separator">/</span>
            <span>Unit 4: Amino Acids & Proteins</span>
        </div>

        <!-- Overview Card -->
        <div class="overview-card">
            <h2><i class="fas fa-info-circle"></i> Unit Overview</h2>
            <p>This unit covers the structure, nomenclature, physical and chemical properties of amino acids, the structure and nomenclature of peptides, classification and properties of proteins, and synthesis of peptides. Master these fundamentals to understand protein structure and function in natural products.</p>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-number">40</div>
                    <div class="stat-label">Questions</div>
                </div>
                <div class="stat">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Minutes</div>
                </div>
                <div class="stat">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Sections</div>
                </div>
            </div>
        </div>

        <!-- Quiz Container -->
        <div class="quiz-container">
            <div class="quiz-header">
                <div class="quiz-title">
                    <i class="fas fa-tasks"></i> Amino Acids & Proteins Quiz
                </div>
                <div class="quiz-controls">
                    <select id="feedback-mode" class="btn btn-secondary">
                        <option value="immediate">Immediate Feedback</option>
                        <option value="end">Feedback at End</option>
                    </select>
                    <button id="reset-quiz" class="btn btn-secondary">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
            </div>

            <div class="quiz-content" id="quiz-content">
                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="quiz-progress" style="width: 0%"></div>
                    </div>
                    <div style="text-align: center; margin-top: 5px; color: var(--text-light); font-size: 0.9rem;">
                        <span id="progress-text">0% Complete</span>
                    </div>
                </div>

                <!-- True/False Questions -->
                <div class="question-section">
                    <div class="section-title">
                        <i class="fas fa-check-circle"></i> True/False Questions (10)
                    </div>
                    <div id="tf-questions">
                        <!-- True/False questions will be inserted here by JavaScript -->
                    </div>
                </div>

                <!-- Multiple Choice Questions -->
                <div class="question-section">
                    <div class="section-title">
                        <i class="fas fa-list-ol"></i> Multiple Choice Questions (20)
                    </div>
                    <div id="mcq-questions">
                        <!-- MCQs will be inserted here by JavaScript -->
                    </div>
                </div>

                <!-- Short Answer Questions -->
                <div class="question-section">
                    <div class="section-title">
                        <i class="fas fa-edit"></i> Short Answer Questions (10)
                    </div>
                    <div id="short-answer-questions">
                        <!-- Short answer questions will be inserted here by JavaScript -->
                    </div>
                </div>

                <!-- Submit Button -->
                <div style="text-align: center; margin-top: 30px;">
                    <button id="submit-quiz" class="btn btn-primary" disabled>
                        <i class="fas fa-paper-plane"></i> Submit Quiz
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results" id="results">
            <div class="score-container">
                <div class="score" id="score-value">0/40</div>
                <div class="score-text" id="score-text">Your Quiz Score</div>
            </div>
            
            <div class="results-details">
                <div class="results-section">
                    <h3><i class="fas fa-check-circle"></i> True/False Questions</h3>
                    <div id="tf-results">
                        <!-- TF results will be inserted here -->
                    </div>
                </div>
                
                <div class="results-section">
                    <h3><i class="fas fa-list-ol"></i> Multiple Choice Questions</h3>
                    <div id="mcq-results">
                        <!-- MCQ results will be inserted here -->
                    </div>
                </div>
                
                <div class="results-section">
                    <h3><i class="fas fa-edit"></i> Short Answer Questions</h3>
                    <div id="short-answer-results">
                        <!-- Short answer results will be inserted here -->
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button id="review-quiz" class="btn btn-primary">
                    <i class="fas fa-eye"></i> Review Quiz
                </button>
            </div>
        </div>
    </div>

    <script>
        // Quiz questions data for Unit 4: Amino Acids & Proteins
        const quizData = {
            trueFalse: [
                {
                    question: "All amino acids found in proteins are chiral except for glycine.",
                    answer: true,
                    explanation: "Correct! Glycine is the only achiral amino acid because its R-group is a hydrogen atom, making it symmetric."
                },
                {
                    question: "The primary structure of a protein refers to its amino acid sequence.",
                    answer: true,
                    explanation: "Correct! The primary structure is the linear sequence of amino acids in a polypeptide chain."
                },
                {
                    question: "Peptide bonds are formed by a condensation reaction between amino groups.",
                    answer: false,
                    explanation: "Incorrect! Peptide bonds form between the carboxyl group of one amino acid and the amino group of another amino acid."
                },
                {
                    question: "All proteins have quaternary structure.",
                    answer: false,
                    explanation: "Incorrect! Only proteins with multiple polypeptide chains have quaternary structure. Many proteins consist of a single polypeptide chain."
                },
                {
                    question: "The isoelectric point (pI) is the pH at which an amino acid has no net charge.",
                    answer: true,
                    explanation: "Correct! At the isoelectric point, the amino acid exists as a zwitterion with no net electrical charge."
                },
                {
                    question: "Disulfide bonds can form between any two amino acids in a protein.",
                    answer: false,
                    explanation: "Incorrect! Disulfide bonds form specifically between cysteine residues through oxidation of their thiol groups."
                },
                {
                    question: "Alpha-helices and beta-sheets are examples of protein secondary structure.",
                    answer: true,
                    explanation: "Correct! Secondary structure refers to local folded structures that form within a polypeptide due to interactions between atoms of the backbone."
                },
                {
                    question: "All amino acids are optically active.",
                    answer: false,
                    explanation: "Incorrect! Glycine is not optically active because it has two hydrogen atoms attached to the alpha carbon, making it achiral."
                },
                {
                    question: "The peptide bond has partial double-bond character.",
                    answer: true,
                    explanation: "Correct! The peptide bond has partial double-bond character due to resonance, which restricts rotation around this bond."
                },
                {
                    question: "Denaturation always destroys the primary structure of a protein.",
                    answer: false,
                    explanation: "Incorrect! Denaturation disrupts secondary, tertiary, and quaternary structure but does not break peptide bonds, so the primary structure remains intact."
                }
            ],
            multipleChoice: [
                {
                    question: "Which of the following is NOT a standard classification of amino acids?",
                    options: ["Acidic", "Basic", "Neutral", "Aromatic"],
                    answer: "Aromatic",
                    explanation: "Correct! While aromatic amino acids exist (phenylalanine, tyrosine, tryptophan), the standard classification is based on the properties of their side chains: acidic, basic, neutral polar, and neutral nonpolar."
                },
                {
                    question: "What type of bond connects amino acids in proteins?",
                    options: ["Glycosidic bond", "Peptide bond", "Ester bond", "Phosphodiester bond"],
                    answer: "Peptide bond",
                    explanation: "Correct! Amino acids are connected by peptide bonds, which form between the carboxyl group of one amino acid and the amino group of another."
                },
                {
                    question: "Which amino acid has a sulfur-containing side chain?",
                    options: ["Serine", "Cysteine", "Threonine", "Tyrosine"],
                    answer: "Cysteine",
                    explanation: "Correct! Cysteine contains a thiol (-SH) group in its side chain, which can form disulfide bonds."
                },
                {
                    question: "Which amino acid is known to form disulfide bridges?",
                    options: ["Methionine", "Cysteine", "Serine", "Threonine"],
                    answer: "Cysteine",
                    explanation: "Correct! Cysteine residues can form disulfide bridges through oxidation of their thiol groups."
                },
                {
                    question: "Which amino acid is negatively charged at physiological pH?",
                    options: ["Lysine", "Arginine", "Glutamic acid", "Histidine"],
                    answer: "Glutamic acid",
                    explanation: "Correct! Glutamic acid has a carboxylic acid group in its side chain that is deprotonated at physiological pH, giving it a negative charge."
                },
                {
                    question: "Which amino acid has an indole ring in its side chain?",
                    options: ["Phenylalanine", "Tyrosine", "Tryptophan", "Histidine"],
                    answer: "Tryptophan",
                    explanation: "Correct! Tryptophan contains an indole ring in its side chain."
                },
                {
                    question: "What is the term for the linear sequence of amino acids in a protein?",
                    options: ["Primary structure", "Secondary structure", "Tertiary structure", "Quaternary structure"],
                    answer: "Primary structure",
                    explanation: "Correct! The primary structure of a protein is its unique sequence of amino acids."
                },
                {
                    question: "Which of these is a hydrophobic amino acid?",
                    options: ["Lysine", "Glutamic acid", "Valine", "Asparagine"],
                    answer: "Valine",
                    explanation: "Correct! Valine has a nonpolar, aliphatic side chain that is hydrophobic."
                },
                {
                    question: "Which level of protein structure is stabilized by disulfide bonds?",
                    options: ["Primary", "Secondary", "Tertiary", "Quaternary"],
                    answer: "Tertiary",
                    explanation: "Correct! Disulfide bonds help stabilize the tertiary structure of proteins by covalently linking different parts of the polypeptide chain."
                },
                {
                    question: "Which amino acid is classified as basic?",
                    options: ["Aspartic acid", "Glutamic acid", "Lysine", "Serine"],
                    answer: "Lysine",
                    explanation: "Correct! Lysine has a positively charged amino group in its side chain at physiological pH, making it a basic amino acid."
                },
                {
                    question: "What is the name of the bond between amino acids in a peptide chain?",
                    options: ["Hydrogen bond", "Ester bond", "Amide bond", "Ether bond"],
                    answer: "Amide bond",
                    explanation: "Correct! The peptide bond is a specific type of amide bond that forms between the carboxyl group of one amino acid and the amino group of another."
                },
                {
                    question: "Which amino acid is the precursor for serotonin and melatonin?",
                    options: ["Phenylalanine", "Tyrosine", "Tryptophan", "Histidine"],
                    answer: "Tryptophan",
                    explanation: "Correct! Tryptophan is the precursor for the neurotransmitters serotonin and melatonin."
                },
                {
                    question: "Which of these is NOT a function of proteins?",
                    options: ["Enzymatic catalysis", "Structural support", "Energy storage", "Information storage"],
                    answer: "Information storage",
                    explanation: "Correct! While proteins perform many functions, information storage is primarily the role of nucleic acids (DNA and RNA)."
                },
                {
                    question: "Which amino acid has a hydroxyl group in its side chain?",
                    options: ["Serine", "Alanine", "Leucine", "Valine"],
                    answer: "Serine",
                    explanation: "Correct! Serine has a hydroxyl group (-OH) in its side chain, making it a polar amino acid."
                },
                {
                    question: "What is the term for a molecule that contains both positive and negative charges but is overall neutral?",
                    options: ["Amphipathic", "Amphoteric", "Zwitterion", "Isoelectric"],
                    answer: "Zwitterion",
                    explanation: "Correct! A zwitterion is a molecule with both positive and negative charges that cancel each other out, resulting in a net charge of zero."
                },
                {
                    question: "Which amino acid is essential for humans?",
                    options: ["Glycine", "Alanine", "Valine", "Proline"],
                    answer: "Valine",
                    explanation: "Correct! Valine is an essential amino acid, meaning it cannot be synthesized by the human body and must be obtained from the diet."
                },
                {
                    question: "What is the primary driving force for protein folding?",
                    options: ["Hydrogen bonding", "Hydrophobic effect", "Disulfide bonds", "Ionic interactions"],
                    answer: "Hydrophobic effect",
                    explanation: "Correct! The hydrophobic effect, where nonpolar side chains cluster together away from water, is the primary driving force for protein folding."
                },
                {
                    question: "Which amino acid has an imidazole ring in its side chain?",
                    options: ["Histidine", "Tryptophan", "Phenylalanine", "Tyrosine"],
                    answer: "Histidine",
                    explanation: "Correct! Histidine contains an imidazole ring in its side chain, which can act as a proton donor or acceptor."
                },
                {
                    question: "What is the term for the loss of a protein's three-dimensional structure?",
                    options: ["Hydrolysis", "Denaturation", "Depolymerization", "Decarboxylation"],
                    answer: "Denaturation",
                    explanation: "Correct! Denaturation is the process by which a protein loses its native three-dimensional structure, usually resulting in loss of function."
                },
                {
                    question: "Which amino acid is achiral?",
                    options: ["Alanine", "Glycine", "Serine", "Cysteine"],
                    answer: "Glycine",
                    explanation: "Correct! Glycine is achiral because its alpha carbon has two hydrogen atoms attached, making it symmetric."
                }
            ],
            shortAnswer: [
                {
                    question: "Name the bond that forms between two cysteine residues in proteins.",
                    answer: "Disulfide bond",
                    explanation: "Correct! Disulfide bonds form between the thiol groups of two cysteine residues and help stabilize protein structure."
                },
                {
                    question: "What is the term for the linear sequence of amino acids in a protein?",
                    answer: "Primary structure",
                    explanation: "Correct! The primary structure of a protein is its unique sequence of amino acids."
                },
                {
                    question: "What is the name for a chain of fewer than 50 amino acids?",
                    answer: "Peptide",
                    explanation: "Correct! Chains of fewer than 50 amino acids are generally called peptides, while longer chains are called proteins or polypeptides."
                },
                {
                    question: "What is the term for a molecule that contains both positive and negative charges but is overall neutral?",
                    answer: "Zwitterion",
                    explanation: "Correct! A zwitterion is a molecule with both positive and negative charges that cancel each other out, resulting in a net charge of zero."
                },
                {
                    question: "What is the name of the process by which peptides are synthesized in the laboratory?",
                    answer: "Solid-phase peptide synthesis",
                    explanation: "Correct! Solid-phase peptide synthesis, developed by Bruce Merrifield, is the standard method for laboratory synthesis of peptides."
                },
                {
                    question: "What is the term for the pH at which an amino acid has no net charge?",
                    answer: "Isoelectric point",
                    explanation: "Correct! The isoelectric point (pI) is the pH at which an amino acid or protein has no net electrical charge."
                },
                {
                    question: "Name the type of chromatography commonly used to separate amino acids.",
                    answer: "Ion exchange chromatography",
                    explanation: "Correct! Ion exchange chromatography is commonly used to separate amino acids based on their charge differences."
                },
                {
                    question: "What is the term for amino acids that cannot be synthesized by the human body?",
                    answer: "Essential amino acids",
                    explanation: "Correct! Essential amino acids are those that cannot be synthesized by the body and must be obtained from the diet."
                },
                {
                    question: "What is the name of the test used to detect the presence of proteins?",
                    answer: "Biuret test",
                    explanation: "Correct! The Biuret test is a chemical test used for detecting the presence of peptide bonds in proteins."
                },
                {
                    question: "What is the term for the regular repeating structures in proteins, such as alpha-helices and beta-sheets?",
                    answer: "Secondary structure",
                    explanation: "Correct! Secondary structure refers to the local folded structures that form within a polypeptide due to interactions between atoms of the backbone."
                }
            ]
        };

        // DOM elements
        const startQuizBtn = document.getElementById('start-quiz');
        const submitQuizBtn = document.getElementById('submit-quiz');
        const resetQuizBtn = document.getElementById('reset-quiz');
        const reviewQuizBtn = document.getElementById('review-quiz');
        const feedbackModeSelect = document.getElementById('feedback-mode');
        const quizContent = document.getElementById('quiz-content');
        const results = document.getElementById('results');
        const scoreValue = document.getElementById('score-value');
        const scoreText = document.getElementById('score-text');
        const progressBar = document.getElementById('quiz-progress');
        const progressText = document.getElementById('progress-text');
        const tfQuestionsContainer = document.getElementById('tf-questions');
        const mcqQuestionsContainer = document.getElementById('mcq-questions');
        const shortAnswerQuestionsContainer = document.getElementById('short-answer-questions');
        const tfResultsContainer = document.getElementById('tf-results');
        const mcqResultsContainer = document.getElementById('mcq-results');
        const shortAnswerResultsContainer = document.getElementById('short-answer-results');

        // State variables
        let userAnswers = {
            trueFalse: [],
            multipleChoice: [],
            shortAnswer: []
        };

        let answeredQuestions = 0;
        const totalQuestions = quizData.trueFalse.length + quizData.multipleChoice.length + quizData.shortAnswer.length;

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Shuffle options within a question
        function shuffleOptions(question) {
            if (!question.options) return question;
            
            // Store the correct answer
            const correctAnswer = question.answer;
            
            // Create an array of objects with option text and whether it's correct
            const optionsWithStatus = question.options.map(option => ({
                text: option,
                isCorrect: option === correctAnswer
            }));
            
            // Shuffle the options
            const shuffledOptions = shuffleArray([...optionsWithStatus]);
            
            // Find the new index of the correct answer
            const newCorrectIndex = shuffledOptions.findIndex(option => option.isCorrect);
            
            // Update the question with shuffled options and new correct answer index
            return {
                ...question,
                options: shuffledOptions.map(option => option.text),
                answer: shuffledOptions[newCorrectIndex].text
            };
        }

        // Update progress bar
        function updateProgress() {
            const progress = (answeredQuestions / totalQuestions) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}% Complete`;
            
            // Enable submit button if all questions are answered
            if (answeredQuestions === totalQuestions) {
                submitQuizBtn.disabled = false;
            }
        }

        // Initialize the quiz
        function initializeQuiz() {
            // Reset user answers and progress
            userAnswers = {
                trueFalse: Array(quizData.trueFalse.length).fill(null),
                multipleChoice: Array(quizData.multipleChoice.length).fill(null),
                shortAnswer: Array(quizData.shortAnswer.length).fill(null)
            };
            
            answeredQuestions = 0;
            updateProgress();

            // Shuffle questions and options
            const shuffledTF = shuffleArray([...quizData.trueFalse]);
            const shuffledMCQ = shuffleArray([...quizData.multipleChoice]).map(shuffleOptions);
            const shuffledShortAnswer = shuffleArray([...quizData.shortAnswer]);

            // Render True/False questions
            tfQuestionsContainer.innerHTML = '';
            shuffledTF.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question-container';
                questionElement.innerHTML = `
                    <div class="question-number"><i class="fas fa-question-circle"></i> True/False Question ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options-container">
                        <div class="option">
                            <input type="radio" id="tf-${index}-true" name="tf-${index}" value="true">
                            <label for="tf-${index}-true">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" id="tf-${index}-false" name="tf-${index}" value="false">
                            <label for="tf-${index}-false">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="tf-feedback-${index}"></div>
                `;
                tfQuestionsContainer.appendChild(questionElement);

                // Add event listeners for immediate feedback if selected
                const inputs = questionElement.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('change', (e) => {
                        userAnswers.trueFalse[index] = e.target.value === 'true';
                        answeredQuestions++;
                        updateProgress();
                        if (feedbackModeSelect.value === 'immediate') {
                            showFeedback('tf', index, q.answer, q.explanation);
                        }
                    });
                });
            });

            // Render Multiple Choice questions
            mcqQuestionsContainer.innerHTML = '';
            shuffledMCQ.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question-container';
                
                let optionsHTML = '';
                q.options.forEach((option, optIndex) => {
                    const optionLetter = String.fromCharCode(65 + optIndex); // A, B, C, D
                    optionsHTML += `
                        <div class="option">
                            <input type="radio" id="mcq-${index}-${optIndex}" name="mcq-${index}" value="${option}">
                            <label for="mcq-${index}-${optIndex}">${optionLetter}. ${option}</label>
                        </div>
                    `;
                });

                questionElement.innerHTML = `
                    <div class="question-number"><i class="fas fa-question-circle"></i> Multiple Choice Question ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options-container">
                        ${optionsHTML}
                    </div>
                    <div class="feedback" id="mcq-feedback-${index}"></div>
                `;
                mcqQuestionsContainer.appendChild(questionElement);

                // Add event listeners for immediate feedback if selected
                const inputs = questionElement.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('change', (e) => {
                        userAnswers.multipleChoice[index] = e.target.value;
                        answeredQuestions++;
                        updateProgress();
                        if (feedbackModeSelect.value === 'immediate') {
                            showFeedback('mcq', index, q.answer, q.explanation);
                        }
                    });
                });
            });

            // Render Short Answer questions
            shortAnswerQuestionsContainer.innerHTML = '';
            shuffledShortAnswer.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = 'question-container';
                questionElement.innerHTML = `
                    <div class="question-number"><i class="fas fa-question-circle"></i> Short Answer Question ${index + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <div class="options-container">
                        <input type="text" class="short-answer" id="short-answer-${index}" placeholder="Type your answer here">
                    </div>
                    <div class="feedback" id="short-answer-feedback-${index}"></div>
                `;
                shortAnswerQuestionsContainer.appendChild(questionElement);

                // Add event listener for immediate feedback if selected
                const input = questionElement.querySelector('input');
                input.addEventListener('input', (e) => {
                    userAnswers.shortAnswer[index] = e.target.value.trim().toLowerCase();
                    if (userAnswers.shortAnswer[index] && userAnswers.shortAnswer[index].length > 0) {
                        if (!userAnswers.shortAnswer[index].endsWith('answered')) {
                            answeredQuestions++;
                            updateProgress();
                        }
                    }
                    
                    if (feedbackModeSelect.value === 'immediate') {
                        showFeedback('short-answer', index, q.answer.toLowerCase(), q.explanation);
                    }
                });
            });

            // Disable submit button initially
            submitQuizBtn.disabled = true;
        }

        // Show feedback for a question
        function showFeedback(type, index, correctAnswer, explanation) {
            const feedbackElement = document.getElementById(`${type}-feedback-${index}`);
            const userAnswer = userAnswers[type === 'tf' ? 'trueFalse' : 
                                          type === 'mcq' ? 'multipleChoice' : 
                                          'shortAnswer'][index];
            
            if (userAnswer === null || userAnswer === undefined) return;
            
            let isCorrect = false;
            
            if (type === 'tf') {
                isCorrect = userAnswer === correctAnswer;
            } else if (type === 'mcq') {
                isCorrect = userAnswer === correctAnswer;
            } else if (type === 'short-answer') {
                // For short answers, we'll do a simple string comparison
                isCorrect = userAnswer === correctAnswer.toLowerCase();
            }
            
            feedbackElement.innerHTML = isCorrect 
                ? `<i class="fas fa-check-circle" style="color: #4cc9f0; margin-right: 8px;"></i> <strong>Correct!</strong> ${explanation}` 
                : `<i class="fas fa-times-circle" style="color: #f72585; margin-right: 8px;"></i> <strong>Incorrect.</strong> The correct answer is: ${correctAnswer}. ${explanation}`;
            
            feedbackElement.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackElement.style.display = 'block';
        }

        // Calculate and display results
        function calculateResults() {
            let score = 0;
            let total = 0;
            
            // Calculate True/False results
            tfResultsContainer.innerHTML = '';
            quizData.trueFalse.forEach((q, index) => {
                total++;
                const userAnswer = userAnswers.trueFalse[index];
                const isCorrect = userAnswer === q.answer;
                
                if (isCorrect) score++;
                
                const resultElement = document.createElement('div');
                resultElement.className = `question-result ${isCorrect ? 'correct' : 'incorrect'}`;
                resultElement.innerHTML = `
                    <div><strong>Question ${index + 1}:</strong> ${q.question}</div>
                    <div>Your answer: ${userAnswer === null ? 'Not answered' : (userAnswer ? 'True' : 'False')}</div>
                    <div>Correct answer: ${q.answer ? 'True' : 'False'}</div>
                    <div>${q.explanation}</div>
                `;
                tfResultsContainer.appendChild(resultElement);
            });
            
            // Calculate Multiple Choice results
            mcqResultsContainer.innerHTML = '';
            quizData.multipleChoice.forEach((q, index) => {
                total++;
                const userAnswer = userAnswers.multipleChoice[index];
                const isCorrect = userAnswer === q.answer;
                
                if (isCorrect) score++;
                
                const resultElement = document.createElement('div');
                resultElement.className = `question-result ${isCorrect ? 'correct' : 'incorrect'}`;
                resultElement.innerHTML = `
                    <div><strong>Question ${index + 1}:</strong> ${q.question}</div>
                    <div>Your answer: ${userAnswer || 'Not answered'}</div>
                    <div>Correct answer: ${q.answer}</div>
                    <div>${q.explanation}</div>
                `;
                mcqResultsContainer.appendChild(resultElement);
            });
            
            // Calculate Short Answer results
            shortAnswerResultsContainer.innerHTML = '';
            quizData.shortAnswer.forEach((q, index) => {
                total++;
                const userAnswer = userAnswers.shortAnswer[index];
                // For short answers, we'll do a simple string comparison
                const isCorrect = userAnswer && userAnswer === q.answer.toLowerCase();
                
                if (isCorrect) score++;
                
                const resultElement = document.createElement('div');
                resultElement.className = `question-result ${isCorrect ? 'correct' : 'incorrect'}`;
                resultElement.innerHTML = `
                    <div><strong>Question ${index + 1}:</strong> ${q.question}</div>
                    <div>Your answer: ${userAnswer || 'Not answered'}</div>
                    <div>Correct answer: ${q.answer}</div>
                    <div>${q.explanation}</div>
                `;
                shortAnswerResultsContainer.appendChild(resultElement);
            });
            
            // Update score display
            scoreValue.textContent = `${score}/${total}`;
            
            // Set score text based on performance
            const percentage = (score / total) * 100;
            if (percentage >= 90) {
                scoreText.textContent = "Excellent! You've mastered this unit!";
            } else if (percentage >= 80) {
                scoreText.textContent = "Great job! You have a solid understanding.";
            } else if (percentage >= 70) {
                scoreText.textContent = "Good work! Review the questions you missed.";
            } else if (percentage >= 60) {
                scoreText.textContent = "You passed! Consider reviewing the material.";
            } else {
                scoreText.textContent = "Keep studying! Review the unit material and try again.";
            }
            
            // Show results section
            results.style.display = 'block';
            quizContent.style.display = 'none';
        }

        // Go back to course page
        function goBack() {
            window.location.href = 'natural-products.html';
        }

        // Event listeners
        startQuizBtn.addEventListener('click', () => {
            initializeQuiz();
            startQuizBtn.disabled = true;
            startQuizBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Restart Quiz';
        });

        submitQuizBtn.addEventListener('click', () => {
            calculateResults();
        });

        resetQuizBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to reset the quiz? All your answers will be lost.')) {
                initializeQuiz();
            }
        });

        reviewQuizBtn.addEventListener('click', () => {
            results.style.display = 'none';
            quizContent.style.display = 'block';
        });
    </script>
</body>
</html>